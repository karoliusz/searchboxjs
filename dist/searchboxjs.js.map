{"version":3,"file":"searchboxjs.js","sources":["../src/ts/constants.ts","../src/ts/SearchBoxLoadingIndicator.ts","../src/ts/utils/BrowserEventManager.ts","../src/ts/utils/State.ts","../src/ts/utils/domUtils.ts","../src/ts/SearchBoxInput.ts","../src/ts/SearchBoxResultList.ts","../src/ts/SearchBox.ts","../src/ts/dataLayer/SearchBoxJSONDataSource.ts"],"sourcesContent":["export const SEARCH_BOX_LIST_DEFAULT_Z_INDEX = 10;\r\n\r\nexport const DEFAULT_CLASS_NAMES = {\r\n    searchBoxList: {\r\n        defaultClassName: \"searchBoxList\",\r\n        itemDefaultClassName: \"searchBoxList__item\",\r\n        itemButtonDefaultClassName: \"searchBoxList__itemButton\",\r\n        messageClassName: \"searchBoxList__message\",\r\n        loadingIndicatorClassName: \"searchBoxList__loadingIndicator\"\r\n    },\r\n    searchBoxInput: {\r\n        defaultClassName: \"searchBox__input\",\r\n        wrapperClassName: \"searchBox__wrapper\"\r\n    },\r\n    searchBoxInputLoadingIndicator: {\r\n        defaultClassName: \"searchBoxInput__loadingIndicator\",\r\n        visibleClassName: \"searchBoxInput__loadingIndicator--visible\",\r\n        hiddenClassName: \"searchBoxInput__loadingIndicator--hidden\"\r\n    }\r\n} as const;\r\n\r\nexport const TEXT = {\r\n    noResultsFound: \"Sorry, can't find a match for your search phrase!\",\r\n    loading: \"Loading your resultsâ€¦\"\r\n} as const;\r\n","import { DEFAULT_CLASS_NAMES } from \"./constants\";\r\n\r\nexport class SearchBoxLoadingIndicator {\r\n    private spinnerElement: HTMLDivElement = null;\r\n\r\n    constructor(private wrapperElement: HTMLDivElement) {\r\n        this.spinnerElement = document.createElement('div');\r\n        this.spinnerElement.className = DEFAULT_CLASS_NAMES.searchBoxInputLoadingIndicator.defaultClassName;\r\n        this.wrapperElement.append(this.spinnerElement);\r\n        this.hide();\r\n    }\r\n\r\n    public show() {\r\n        const { hiddenClassName, visibleClassName } = DEFAULT_CLASS_NAMES.searchBoxInputLoadingIndicator;\r\n\r\n        this.spinnerElement.classList.remove(hiddenClassName);\r\n        this.spinnerElement.classList.add(visibleClassName);\r\n    }\r\n\r\n    public hide() {\r\n        const { hiddenClassName, visibleClassName } = DEFAULT_CLASS_NAMES.searchBoxInputLoadingIndicator;\r\n        \r\n        this.spinnerElement.classList.remove(visibleClassName);\r\n        this.spinnerElement.classList.add(hiddenClassName);\r\n    }\r\n\r\n    public dispose() {\r\n        this.spinnerElement.remove();\r\n        this.spinnerElement = null;\r\n    }\r\n}\r\n","type ListenerFn<T> = (event: T) => void;\r\n\r\ninterface RegisteredListener {\r\n    type: keyof HTMLElementEventMap;\r\n    fn: ListenerFn<unknown>;\r\n}\r\n\r\nexport class BrowserEventManager {\r\n    private eventListeners: Array<RegisteredListener> = [];\r\n\r\n    constructor(private element: Element) {}\r\n\r\n    public addListener<T extends keyof HTMLElementEventMap>(type: T, fn: ListenerFn<HTMLElementEventMap[T]>) {\r\n        this.element.addEventListener(type, fn);\r\n        this.eventListeners.push({ type, fn });\r\n    }\r\n\r\n    public dispose() {\r\n        this.eventListeners.forEach(({ type, fn }) => {\r\n            this.element.removeEventListener(type, fn);\r\n        });\r\n\r\n        this.eventListeners.length = 0;\r\n        this.element = null;\r\n    }\r\n}\r\n","import { BehaviorSubject, distinctUntilChanged, Observable } from 'rxjs';\r\n\r\nimport { StateCompareFn } from '../interfaces';\r\n\r\nexport class State<T extends object> {\r\n    static areEqualShallow(a: object, b: object): boolean {\r\n        for (let key in a) {\r\n            if (!(key in b) || a[key] !== b[key]) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        for (let key in b) {\r\n            if (!(key in a)) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private lastBroadcastedState: T = null;\r\n    private compareState: StateCompareFn<T>;\r\n\r\n    private stateSource: BehaviorSubject<T>;\r\n    private _state$: Observable<T>;\r\n\r\n    public get state$(): Observable<T> {\r\n        return this._state$;\r\n    }\r\n\r\n    constructor(initialState: T) {\r\n        this.lastBroadcastedState = { ...initialState };\r\n        this.compareState = this.defaultCompareState;\r\n        this.stateSource = new BehaviorSubject(this.lastBroadcastedState);\r\n        this._state$ = this.stateSource.pipe(\r\n            distinctUntilChanged(this.compareState)\r\n        );\r\n    }\r\n\r\n    public setState(state: Partial<T>): void {\r\n        this.lastBroadcastedState = { ...this.lastBroadcastedState, ...state };\r\n        this.stateSource.next(this.lastBroadcastedState);\r\n    }\r\n\r\n    private defaultCompareState(a: T, b: T): boolean {\r\n        return State.areEqualShallow(a, b);\r\n    }\r\n}\r\n","export function getPathBetweenElements(ancestor: HTMLElement, descendant: HTMLElement): Array<HTMLElement> {\r\n    if (!ancestor || !descendant || !ancestor.contains(descendant)) {\r\n        return null;\r\n    }\r\n\r\n    if (ancestor === descendant) {\r\n        return [ancestor];\r\n    }\r\n\r\n    const path: Array<HTMLElement> = [descendant];\r\n    let currentNode = descendant;\r\n\r\n    while (currentNode.parentNode && currentNode.parentNode !== ancestor) {\r\n        currentNode = currentNode.parentNode as HTMLElement;\r\n        path.unshift(currentNode);\r\n    }\r\n\r\n    path.unshift(ancestor);\r\n    \r\n    return path;\r\n}","import { DEFAULT_CLASS_NAMES } from \"./constants\";\r\nimport { SearchBoxLoadingIndicator } from \"./SearchBoxLoadingIndicator\";\r\nimport { BrowserEventManager } from \"./utils\";\r\n\r\ninterface SearchBoxInputOptions {\r\n    onFocus?: () => void;\r\n    onBlur?: () => void;\r\n    onValueChange?: (value: string) => void;\r\n}\r\n\r\nexport class SearchBoxInput {\r\n    private browserEventManager: BrowserEventManager = null;\r\n    private wrapperElement: HTMLDivElement = null;\r\n    private loadingIndicator: SearchBoxLoadingIndicator = null;\r\n\r\n    constructor(\r\n        private inputElement: HTMLInputElement,\r\n        private options: SearchBoxInputOptions = {}\r\n    ) {\r\n        this.browserEventManager = new BrowserEventManager(this.inputElement);\r\n\r\n        this.browserEventManager.addListener('focus', () => {\r\n            this.options.onFocus && this.options.onFocus();\r\n        });\r\n\r\n        this.browserEventManager.addListener('blur', () => {\r\n            this.options.onBlur && this.options.onBlur();\r\n        });\r\n\r\n        this.browserEventManager.addListener('input', (event: Event) => {\r\n            const target = event.target as HTMLInputElement;\r\n\r\n            this.options.onValueChange && this.options.onValueChange(target.value);\r\n        });\r\n\r\n        this.addWrapperElement();\r\n        this.loadingIndicator = new SearchBoxLoadingIndicator(this.wrapperElement);\r\n    }\r\n\r\n    public setFocus() {\r\n        this.inputElement.focus();\r\n    }\r\n\r\n    public showLoadingIndicator() {\r\n        this.loadingIndicator.show();\r\n    }\r\n\r\n    public hideLoadingIndicator() {\r\n        this.loadingIndicator.hide();\r\n    }\r\n\r\n    public dispose() {\r\n        this.loadingIndicator.dispose();\r\n        this.removeWrapperElement();\r\n        this.inputElement = null;\r\n        this.browserEventManager.dispose();\r\n    }\r\n\r\n    private addWrapperElement() {\r\n        const inputElement = this.inputElement;\r\n\r\n        this.wrapperElement = document.createElement('div');\r\n        this.wrapperElement.className = DEFAULT_CLASS_NAMES.searchBoxInput.wrapperClassName;\r\n        inputElement.insertAdjacentElement('beforebegin', this.wrapperElement);\r\n        this.wrapperElement.appendChild(inputElement);\r\n    }\r\n\r\n    private removeWrapperElement() {\r\n        this.wrapperElement.insertAdjacentElement('beforebegin', this.inputElement);\r\n        this.wrapperElement.remove();\r\n        this.wrapperElement = null;\r\n    }\r\n}\r\n","import { getPathBetweenElements, BrowserEventManager } from \"./utils\";\r\nimport { DEFAULT_CLASS_NAMES, SEARCH_BOX_LIST_DEFAULT_Z_INDEX, TEXT } from \"./constants\";\r\n\r\ninterface SearchBoxResultListOptions<T> {\r\n    onFocus?: () => void;\r\n    onBlur?: () => void;\r\n    onItemSelect?: (value: T) => void;\r\n}\r\n\r\nexport class SearchBoxResultList<T> {\r\n    static escapeHTML(unescaped: string): string {\r\n        return unescaped\r\n            .replace(/&/g, \"&amp;\")\r\n            .replace(/</g, \"&lt;\")\r\n            .replace(/>/g, \"&gt;\")\r\n            .replace(/\"/g, \"&quot;\")\r\n            .replace(/'/g, \"&#039;\");\r\n    }\r\n\r\n    private listElementEvents: BrowserEventManager = null;\r\n    private documentEvents: BrowserEventManager = null;\r\n    private listElement: HTMLUListElement = null;\r\n    private items: T[] = [];\r\n    private visible = false;\r\n\r\n    private isFocused = false;\r\n\r\n    constructor(\r\n        private inputElement: Element,\r\n        private itemTemplate: string,\r\n        private options: SearchBoxResultListOptions<T> = {}\r\n    ) {\r\n        this.initializeListElement();\r\n        this.listElementEvents = new BrowserEventManager(this.listElement);\r\n        this.documentEvents = new BrowserEventManager(window.document.documentElement);\r\n        this.listElement.style.position = 'fixed';\r\n        this.listElement.style.zIndex = String(SEARCH_BOX_LIST_DEFAULT_Z_INDEX);\r\n\r\n        this.listElementEvents.addListener('mousedown', event => {\r\n            this.setFocus();\r\n        });\r\n\r\n        this.listElementEvents.addListener('click', event => {\r\n            const target = event.target;\r\n\r\n            if (target instanceof HTMLElement) {\r\n                const selectedItem = this.getSelectedItem(target);\r\n            \r\n                this.options.onItemSelect(selectedItem);\r\n            }\r\n        });\r\n\r\n        this.documentEvents.addListener('mousedown', event => {\r\n            const clickedElement = event.target as HTMLElement;\r\n\r\n            if (this.isFocused && !this.listElement.contains(clickedElement)) {\r\n                this.blur();\r\n            }\r\n        });\r\n    }\r\n\r\n    public setItems(items: T[]) {\r\n        const { searchBoxList: { messageClassName } } = DEFAULT_CLASS_NAMES;\r\n\r\n        this.clearList();\r\n\r\n        if (items.length) {\r\n            this.items = items;\r\n            this.items.forEach((item, index) => {\r\n                this.listElement.appendChild(this.createListItem(item, index));\r\n            });\r\n        } else {\r\n            this.listElement.innerHTML = `<div class=\"${messageClassName}\">${TEXT.noResultsFound}</div>`\r\n        }\r\n    }\r\n\r\n    public beginLoading() {\r\n        const { searchBoxList: { messageClassName, loadingIndicatorClassName } } = DEFAULT_CLASS_NAMES;\r\n\r\n        this.clearList();\r\n\r\n        this.listElement.innerHTML = `\r\n            <div class=\"${messageClassName}\">\r\n                <div class=\"${loadingIndicatorClassName}\"></div>\r\n                ${TEXT.loading}\r\n            </div>\r\n        `\r\n    }\r\n\r\n    public show() {\r\n        const { bottom, right } = this.inputElement.getBoundingClientRect();\r\n        const viewportWidth = document.documentElement.clientWidth;\r\n\r\n        this.listElement.style.display = 'block';\r\n        this.listElement.style.top = `${bottom}px`;\r\n        this.listElement.style.right = `${viewportWidth - right}px`;\r\n        this.visible = true;\r\n    }\r\n\r\n    public hide() {\r\n        if (this.visible) {\r\n            this.visible = false;\r\n            this.listElement.style.display = 'none';\r\n            this.blur();\r\n        }\r\n    }\r\n\r\n    public setFocus() {\r\n        if (!this.isFocused) {\r\n            this.isFocused = true;\r\n            this.options.onFocus && this.options.onFocus();\r\n        }\r\n    }\r\n\r\n    public blur() {\r\n        if (this.isFocused) {\r\n            this.isFocused = false;\r\n            this.options.onBlur && this.options.onBlur();\r\n        }\r\n    }\r\n\r\n    public dispose() {\r\n        this.inputElement = null;\r\n        this.listElementEvents.dispose();\r\n        this.documentEvents.dispose();\r\n    }\r\n\r\n    private getSelectedItem(clickedElement: HTMLElement): T {\r\n        const { searchBoxList: { itemButtonDefaultClassName } } = DEFAULT_CLASS_NAMES;\r\n        const path = getPathBetweenElements(this.listElement, clickedElement);\r\n        const button = path?.find(element => element.tagName === 'BUTTON' && element.classList.contains(itemButtonDefaultClassName));\r\n\r\n        if (button?.tagName === 'BUTTON' && button.classList.contains(itemButtonDefaultClassName)) {\r\n            const itemIndex = typeof button?.dataset.index === 'string' ? Number(button.dataset.index) : null;\r\n            const selectedItem = this.items[itemIndex] || null;\r\n        \r\n            return selectedItem;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private clearList() {\r\n        this.items = [];\r\n        this.listElement.innerHTML = '';\r\n    }\r\n\r\n    private initializeListElement() {\r\n        const { searchBoxList: { defaultClassName } } = DEFAULT_CLASS_NAMES;\r\n\r\n        this.listElement = document.createElement('ul');\r\n        this.listElement.classList.add(defaultClassName);\r\n        this.listElement.style.display = 'none';\r\n        document.body.append(this.listElement);\r\n        this.beginLoading();\r\n    }\r\n\r\n    private createListItem(item: T, index: number) {\r\n        const listItemElement = document.createElement('li');\r\n        const buttonElement = document.createElement('button');\r\n        const htmlContent = this.getItemHTML(item, this.itemTemplate);\r\n        const { searchBoxList: { itemButtonDefaultClassName, itemDefaultClassName } } = DEFAULT_CLASS_NAMES;\r\n\r\n        buttonElement.setAttribute('data-index', String(index));\r\n        buttonElement.setAttribute('type', 'button');\r\n        buttonElement.innerHTML = htmlContent;\r\n        buttonElement.classList.add(itemButtonDefaultClassName);\r\n        listItemElement.appendChild(buttonElement);\r\n        listItemElement.classList.add(itemDefaultClassName);\r\n\r\n        return listItemElement;\r\n    }\r\n\r\n    private getItemHTML(item: T, itemTemplate: string) {\r\n        return itemTemplate.replace(/{{(.+)}}/g, (stringToReplace, enclosedParameterName) => {\r\n            const parameterName = enclosedParameterName.trim();\r\n            const value = item[parameterName] ?? null;\r\n            const valueToRender = value === null ? '' : String(value);\r\n\r\n            return SearchBoxResultList.escapeHTML(valueToRender);\r\n        });\r\n    }\r\n}\r\n","import { debounceTime, filter, first, map, merge, skipUntil, Subscription, switchMap } from \"rxjs\";\r\n\r\nimport { DEFAULT_CLASS_NAMES } from \"./constants\";\r\nimport { SearchBoxDataSource } from \"./dataLayer/interfaces\";\r\nimport { SearchBoxOptions } from \"./interfaces\";\r\nimport { SearchBoxInput } from \"./SearchBoxInput\";\r\nimport { SearchBoxResultList } from \"./SearchBoxResultList\";\r\nimport { State } from \"./utils\";\r\n\r\ninterface SearchBoxState<T = unknown> {\r\n    inputFocused: boolean;\r\n    resultListFocused: boolean;\r\n    inputValue: string;\r\n    selectedItem: T;\r\n}\r\n\r\n/**\r\n * SearchBox component\r\n * \r\n * @param itemTemplate Provides HTML template for found items. Parameter names enclosed with {{ and }} will be replaced with their values from the item object. Example: <span class=\"itemName\">{{name}}</span>\r\n */\r\nexport class SearchBox<T> {\r\n    private input: SearchBoxInput = null;\r\n    private resultList: SearchBoxResultList<T> = null;\r\n    private isInitializing = false;\r\n    private isInitialized = false;\r\n\r\n    private state: State<SearchBoxState<T>> = null;\r\n    private stateSubscription: Subscription;\r\n    private inputValueSubscription: Subscription;\r\n    private inputItemsSubscription: Subscription;\r\n\r\n    constructor(\r\n        private inputElement: HTMLElement,\r\n        private dataSource: SearchBoxDataSource<T>,\r\n        private itemTemplate: string,\r\n        private searchKeys: Array<keyof T>,\r\n        private options: SearchBoxOptions<T> = {}) {\r\n        const minSearchValueLength = 3;\r\n\r\n        if (!(inputElement instanceof HTMLInputElement)) {\r\n            throw new Error('Input element must be a valid HTMLInputElement!');\r\n        }\r\n\r\n        inputElement.classList.add(DEFAULT_CLASS_NAMES.searchBoxInput.defaultClassName);\r\n\r\n        this.state = new State<SearchBoxState<T>>({\r\n            inputFocused: false,\r\n            resultListFocused: false,\r\n            inputValue: '',\r\n            selectedItem: null\r\n        });\r\n\r\n        this.input = new SearchBoxInput(inputElement, {\r\n            onFocus: () => this.state.setState({ inputFocused: true, resultListFocused: false }),\r\n            onBlur: () => this.state.setState({ inputFocused: false }),\r\n            onValueChange: value => this.state.setState({ inputValue: value })\r\n        });\r\n\r\n        this.resultList = new SearchBoxResultList(inputElement, itemTemplate, {\r\n            onFocus: () => this.state.setState({ resultListFocused: true }),\r\n            onBlur: () => this.state.setState({ resultListFocused: false }),\r\n            onItemSelect: item => this.state.setState({ selectedItem: item })\r\n        });\r\n\r\n        this.stateSubscription = this.state.state$.subscribe(event => this.onStateChange(event));\r\n        \r\n        const firstFocus$ = this.state.state$.pipe(\r\n            first(state => state?.inputFocused),\r\n            map(() => '')\r\n        );\r\n\r\n        const inputValue$ = this.state.state$.pipe(\r\n            filter((state) => !(state?.inputValue) || state?.inputValue.length >= minSearchValueLength),\r\n            map(state => state.inputValue || ''),\r\n            debounceTime(500)\r\n        );\r\n\r\n        const inputItems$ = merge(firstFocus$, inputValue$).pipe(\r\n            skipUntil(firstFocus$),\r\n            switchMap(value => this.dataSource.getItems(value, 10, this.searchKeys))\r\n        );\r\n\r\n        this.inputValueSubscription = merge(firstFocus$, inputValue$)\r\n            .pipe(skipUntil(firstFocus$))\r\n            .subscribe(() => this.input.showLoadingIndicator());\r\n        \r\n        this.inputItemsSubscription = inputItems$.subscribe(items => {\r\n            this.resultList.setItems(items);\r\n            this.input.hideLoadingIndicator();\r\n        });\r\n    }\r\n\r\n    dispose() {\r\n        this.input.dispose();\r\n        this.resultList.dispose();\r\n        this.inputElement = null;\r\n        this.stateSubscription.unsubscribe();\r\n        this.inputValueSubscription.unsubscribe();\r\n    }\r\n\r\n    private onStateChange(event: SearchBoxState<T>) {\r\n        if (event.selectedItem && this.options.onItemSelect) {\r\n            this.options.onItemSelect(event.selectedItem);\r\n        }\r\n\r\n        if (event.inputFocused) {\r\n            this.resultList.show();\r\n        } else if (!event.resultListFocused) {\r\n            this.resultList.hide();\r\n        }\r\n    }\r\n}\r\n","import { SearchBoxDataSource } from \"./interfaces\";\r\n\r\nexport class SearchBoxJSONDataSource<T> implements SearchBoxDataSource<T> {\r\n    private items: Promise<T[]> = null;\r\n\r\n    constructor(private url: string) {}\r\n\r\n    getItems(searchPhrase: string, take: number, searchKeys: Array<keyof T>) {\r\n        if (!this.items) {\r\n            // this.items = this.fetchJSON(this.url);\r\n\r\n            this.items = this.waitForIt(1000).then(() => this.fetchJSON(this.url));\r\n        }\r\n\r\n        // this.items.then(items => this.filterItems(items, searchPhrase, searchKeys));\r\n\r\n        return this.waitForIt(1000).then(() => {\r\n            return this.items.then(items => this.filterItems(items, searchPhrase, searchKeys));\r\n        });\r\n    }\r\n\r\n    private async fetchJSON(url: string): Promise<T[]> {\r\n        return fetch(url)\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                } else {\r\n                    throw new Error(`Request to fetch JSON data for the SearchBox has failed with status code ${response.status}`);\r\n                }\r\n            });\r\n    }\r\n\r\n    private filterItems(items: T[], searchPhrase: string, searchKeys: Array<keyof T>) {\r\n        if (searchPhrase.length < 2) {\r\n            return items;\r\n        }\r\n\r\n        searchPhrase = searchPhrase.toLowerCase();\r\n\r\n        return items.filter(item => searchKeys.some(key => {\r\n            const fieldValue = item[key];\r\n\r\n            return fieldValue && String(fieldValue).toLowerCase().includes(searchPhrase);\r\n        }));\r\n    }\r\n\r\n    /** TODO: Remove later - this is only for testing purposes */\r\n    private waitForIt(timeMs: number): Promise<void> {\r\n        return new Promise((resolve) => {\r\n            setTimeout(() => resolve(), timeMs);\r\n        });\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}